generator client {
  provider = "prisma-client-js"

}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Business {
  id        String   @id @default(cuid())
  name      String   @unique
  users     User[]
  assets    Asset[]
  createdAt DateTime @default(now())
}
 
model User {
  id          String   @id @default(cuid())
  name        String
  email       String   @unique
  password    String?
  businessId  String
  business    Business @relation(fields: [businessId], references: [id])
  assets      Asset[]  // ✅ one-to-many relation with Asset
  createdAt   DateTime @default(now())
}

model Asset {
  id              String   @id @default(cuid())
  name            String
  type            AssetType
  imageUrl        String?
  businessId      String
  business        Business @relation(fields: [businessId], references: [id])
  plantNumber String
  serial String
  renewals Renewal[]
  location String

  userId          String   // ✅ foreign key to User
  user            User     @relation(fields: [userId], references: [id]) // ✅ back relation

  createdAt       DateTime @default(now())

}


model Renewal {
    id   String   @id @default(cuid())
    renewalDate DateTime
    createdAt       DateTime @default(now())
    updatedAt   DateTime @updatedAt @default(now())
    assetId String
    asset Asset  @relation(fields: [assetId], references: [id]) 

}


enum AssetType {
  MACHINERY
  VEHICLE
  EQUIPMENT

}

enum RenewalType {
  CALIBRATION
  CERTIFICATION
  SERVICE
  TESTING
}
