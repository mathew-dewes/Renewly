generator client {
  provider = "prisma-client"
  output   = "../server/db/generated/prisma"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Business {
  id        String   @id @default(cuid())
  name      String   @unique
  users     User[]
  assets    Asset[]
  createdAt DateTime @default(now())
}

model User {
  id          String   @id @default(cuid())
  name        String?
  email       String   @unique
  password    String?
  businessId  String
  business    Business @relation(fields: [businessId], references: [id])
  assets      Asset[]  // ✅ one-to-many relation with Asset
  createdAt   DateTime @default(now())
}

model Asset {
  id              String   @id @default(cuid())
  name            String
  type            String
  renewalDate     DateTime
  frequencyMonths Int
  notes           String?
  imageUrl        String?
  businessId      String
  business        Business @relation(fields: [businessId], references: [id])

  userId          String   // ✅ foreign key to User
  user            User     @relation(fields: [userId], references: [id]) // ✅ back relation

  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}
